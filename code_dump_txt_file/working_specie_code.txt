CONTROLLER
    private $SpeciesModel;

        $this->SpeciesModel = new SpeciesModel($conn);

        $species = $this->SpeciesModel->getAllSpecies();

    //  SPECIES TABLE MODEL

    public function addSpeciesType()
    {
        // Check if the POST request contains a 'name' field and it's not empty
        if (!isset($_POST['name']) || empty($_POST['name'])) {
            echo "Please enter a species name.";
        } else {
            // If it does, get the species name from the POST request
            $species_name = $_POST['name'];
            // Use the SpeciesModel to insert the new species into the database
            $this->SpeciesModel->insertSpecies($species_name);
            echo "Species added successfully: $species_name";
        }
    }

    public function updateSpeciesName($id, $new_species_name)
    {
        // Use the SpeciesModel to update the species in the database
        // The $id parameter is the ID of the species to update
        // The $new_species_name parameter is the new name for the species
        return $this->SpeciesModel->updateSpecies($id, $new_species_name);
    }

    public function deleteSpeciesType()
    {
        // Check if the POST request contains a 'pet_species_id' field
        if (isset($_POST['pet_species_id'])) {
            // If it does, get the species ID from the POST request
            $species_id = $_POST['pet_species_id'];
            // Use the SpeciesModel to delete the species from the database
            $result = $this->SpeciesModel->deleteSpecies($species_id);
            if ($result) {
                echo "Species deleted successfully: $species_id";
            } else {
                echo "Error deleting species: $species_id";
            }
        } else {
            echo "No species ID provided.";
        }
    }

        $species = $this->SpeciesModel->getAllSpecies();

    $controller->addSpeciesType();

// SPECIES

if (isset($_POST['pet_species_id'], $_POST['new_species_name'])) {
    $controller->updateSpeciesName($_POST['pet_species_id'], $_POST['new_species_name']);
}

if (isset($_POST['delete_species'])) {
    $controller->deleteSpeciesType();
}



MODEL
class SpeciesModel
{
    private $mysqli;
    private $ConnectionDA;
    public function __construct($ConnectionDA)
    {
        $this->ConnectionDA = $ConnectionDA;
    }

    public function connect()
    {
        try {
            $mysqli = new mysqli(
                $this->ConnectionDA->host,
                $this->ConnectionDA->username,
                $this->ConnectionDA->password,
                $this->ConnectionDA->dbname
            );

            if ($mysqli->connect_error) {
                throw new Exception("could not connect");
            }
            return $mysqli;
        } catch (Exception $e) {
            return false;
        }
    }
    public function getAllSpecies()
    {
        // Connect to the database
        $mysqli = $this->connect();
        if ($mysqli) {
            // If the connection is successful, execute a SQL query to get all species
            $result = $mysqli->query("SELECT * FROM pet_species");
            $results = array();
            // Fetch all the rows from the result of the query
            while ($row = $result->fetch_assoc()) {
                $results[] = $row;
            }
            // Close the database connection
            $mysqli->close();
            // Return the fetched rows
            return $results;
        } else {
            // If the connection is not successful, return false
            return false;
        }
    }

    public function insertSpecies($species_name)
    {
        // Connect to the database
        $mysqli = $this->connect();
        if ($mysqli) {
            // If the connection is successful, execute a SQL query to insert the new species
            if ($mysqli->query("INSERT INTO pet_species (pet_species_type) VALUES ('$species_name')") === TRUE) {
                // Close the database connection
                $mysqli->close();
                // Return true if the insertion was successful
                return true;
            } else {
                // If the insertion was not successful, print the error and return false
                echo "Error: " . $mysqli->error;
                $mysqli->close();
                return false;
            }
        } else {
            // If the connection is not successful, return false
            return false;
        }
    }

    public function updateSpecies($id, $new_species_name)
    {
        // Connect to the database
        $mysqli = $this->connect();
        if ($mysqli) {
            // If the connection is successful, execute a SQL query to update the species
            $sql = "UPDATE pet_species SET pet_species_type = '$new_species_name' WHERE pet_species_id = '$id' ";
            if ($mysqli->query($sql) === TRUE) {
                // Close the database connection
                $mysqli->close();
                // Return true if the update was successful
                return true;
            } else {
                // If the update was not successful, print the error and return false
                echo "Error: " . $mysqli->error;
                $mysqli->close();
                return false;
            }
        } else {
            // If the connection is not successful, return false
            return false;
        }
    }

    public function deleteSpecies($id)
    {
        // Connect to the database
        $mysqli = $this->connect();
        if ($mysqli) {
            // If the connection is successful, execute a SQL query to delete the species
            $sql = "DELETE FROM pet_species WHERE pet_species_id = $id";
            if ($mysqli->query($sql) === TRUE) {
                // Close the database connection
                $mysqli->close();
                // Return true if the deletion was successful
                return true;
            } else {
                // If the deletion was not successful, print the error and return false
                echo "Error: " . $mysqli->error;
                $mysqli->close();
                return false;
            }
        } else {
            // If the connection is not successful, return false
            return false;
        }
    }
}

VIEW
    if ($species) {

        echo "<table border='1'>";
        echo "<tr>
        <th>ID</th>
        <th>Species Type</th>
        <th>Update</th>

    </tr>";
        foreach ($species as $specie) {
            echo "<td>" . $specie['pet_species_id'] . "</td>";
            echo "<td>" . $specie['pet_species_type'] . "</td>";
            echo "<td>";
            include 'views/updateSpeciesTypeForm.php';
            echo "</td>";
            echo "</tr>";
        }
        echo "</table>";
    } else {
        echo "No species data found.";
    }



