CONTROLLER PAGE

    // private $speciesModel;
    // private $petModel;


        $this->speciesModel = new SpeciesModel($conn);
        $this->petModel = new PetModel($conn);

        $species = $this->speciesModel->getSpeciesType();
        $pets = $this->petModel->getAllPets();

    //  SPECIES TABLE MODEL
    public function addSpeciesType()
    {
        $type = $_POST['pet_species_type'];
        // Warning: Undefined array key "pet_species_type" in /var/www/vhosts/tischa79.web582.com/httpdocs/block3-adv-web/project-1/pet-store-mvc/controllers/PetControllers.php on line 32
        // Please fill out all fields

        if (!$type) {
            echo "Please fill out all fields";
            $this->petForm();
            return;
        } elseif ($this->speciesModel->insertSpeciesType($type)) {
            echo "Pet type added successfully: $type";
        } else {
            echo "Error adding pet type";
            $this->petForm();
        }
        // $this->display();
    }

    public function addSpeciesType()
    {
        if (!isset($_POST['species_name']) || empty($_POST['species_name'])) {
            echo "Please enter a species name.";
        } else {
            $species_name = $_POST['species_name'];
            $this->SpeciesModel->insertSpeciesType($species_name);
            echo "Species added successfully: $species_name";
        }
    }

    public function updateSpeciesName($id, $new_species_name)
    {
        return $this->SpeciesModel->updateSpeciesType($id, $new_species_name);
    }

    public function deleteSpeciesType()
    {
        if (isset($_POST['pet_species_id'])) {
            $species_id = $_POST['pet_species_id'];
            $result = $this->SpeciesModel->deleteSpeciesType($species_id);
            if ($result) {
                echo "Species deleted successfully: $species_id";
            } else {
                echo "Error deleting species: $species_id";
            }
        } else {
            echo "No species ID provided.";
        }
    }


    //  PET TABLE MODEL
    public function addPet()
    {
        $name = $_POST['name'];
        $age = $_POST['age'];
        $gender = $_POST['gender'];
        $color = $_POST['color'];
        $breed_id = $_POST['breed_id'];
        $species_id = $_POST['species_id'];

        if (!$name || !$age || !$gender || !$color || !$breed_id || !$species_id) {
            echo "Please fill out all fields";
            $this->petForm();
            return;
        } elseif ($this->petModel->insertPet($name, $age, $gender, $color, $breed_id, $species_id)) {
            echo "Pet added successfully: $name";
        } else {
            echo "Error adding pet";
            $this->petForm();
        }
        // $this->display();
    }


        $species = $this->speciesModel->getSpeciesType();
        $pets = $this->petModel->getAllPets();



        if (isset($_POST['submit'])) {
    $controller->addSpeciesType();
}

// if (isset($_POST['submit'])) {
//     $controller->updateSpeciesType();
// }


if (isset($_POST['submit'])) {
    $controller->addPet();
}

// if (isset($_POST['submit'])) {
//     $controller->updatePet();
// }






MODEL PAGE
class SpeciesModel
{
    private $mysqli;
    private $ConnectionDA;
    public function __construct($ConnectionDA)
    {
        $this->ConnectionDA = $ConnectionDA;
    }

    public function connect()
    {
        try {
            $mysqli = new mysqli(
                $this->ConnectionDA->host,
                $this->ConnectionDA->username,
                $this->ConnectionDA->password,
                $this->ConnectionDA->dbname
            );

            if ($mysqli->connect_error) {
                throw new Exception("could not connect");
            }
            return $mysqli;
        } catch (Exception $e) {
            return false;
        }
    }

    // select all species type from the database to display
    public function getSpeciesType()
    {
        $mysqli = $this->connect();
        if ($mysqli) {
            $result = $mysqli->query("SELECT * FROM pet_species");
            while ($row = $result->fetch_assoc()) {
                $results[] = $row;
            }
            $mysqli->close();
            return $results;
        } else {
            return false;
        }
    }

    // insert a new species type into the database
    public function insertSpeciesType($pet_species_type)
    {
        $mysqli = $this->connect();
        if ($mysqli) {
            if ($mysqli->query("INSERT INTO pet_species (pet_species_type) 

            VALUES ('$pet_species_type')") === TRUE) {
                $mysqli->close();
                return true;
            } else {
                echo "Error: " . $mysqli->error;
                $mysqli->close();
                return false;
            }
        } else {
            return false;
        }
    }

    //update a species type
    public function updateSpeciesType($id, $new_pet_species_type)
    {
        $mysqli = $this->connect();
        if ($mysqli) {
            $sql = "UPDATE pet_species SET pet_species_type = '$new_pet_species_type' WHERE pet_species_id = $id";
            if ($mysqli->query($sql) === TRUE) {
                $mysqli->close();
                return true;
            } else {
                echo "Error: " . $mysqli->error;
                $mysqli->close();
                return false;
            }
        } else {
            return false;
        }
    }

    //delete a species type

    // public function deleteSpeciesType($id)
    // {
    //     $mysqli = $this->connect();
    //     if ($mysqli) {
    //         $sql = "DELETE FROM pet_species WHERE pet_species_id = $id";
    //         if ($mysqli->query($sql) === TRUE) {
    //             $mysqli->close();
    //             return true;
    //         } else {
    //             echo "Error: " . $mysqli->error;
    //             $mysqli->close();
    //             return false;
    //         }
    //     } else {
    //         return false;
    //     }
    // }
}

class PetModel
{
    private $mysqli;
    private $ConnectionDA;
    public function __construct($ConnectionDA)
    {
        $this->ConnectionDA = $ConnectionDA;
    }

    public function connect()
    {
        try {
            $mysqli = new mysqli(
                $this->ConnectionDA->host,
                $this->ConnectionDA->username,
                $this->ConnectionDA->password,
                $this->ConnectionDA->dbname
            );

            if ($mysqli->connect_error) {
                throw new Exception("could not connect");
            }
            return $mysqli;
        } catch (Exception $e) {
            return false;
        }
    }


    // select all pets from the database to display
    public function getAllPets()
    {
        $mysqli = $this->connect();
        if ($mysqli) {
            $result = $mysqli->query("SELECT * FROM pets");
            $results = array();
            while ($row = $result->fetch_assoc()) {
                $results[] = $row;
            }
            $mysqli->close();
            return $results;
        } else {
            return false;
        }
    }


    // insert a new pet into the database
    public function insertPet($name, $gender, $age, $color, $breed, $species)
    {
        $mysqli = $this->connect();
        if ($mysqli) {
            if ($mysqli->query("INSERT INTO pets (pet_name, pet_gender, pet_age, pet_color, breed_id, species_id) 

            VALUES ('$name', '$gender', '$age', '$color', '$breed', '$species')") === TRUE) {
                $mysqli->close();
                return true;
            } else {
                echo "Error: " . $mysqli->error;
                $mysqli->close();
                return false;
            }
        } else {
            return false;
        }
    }

    //update a pet name
    public function updatePet($name, $new_pet_name)
    {
        $mysqli = $this->connect();
        if ($mysqli) {
            $sql = "UPDATE pets SET pet_name = '$new_pet_name' WHERE pet_name = $name";
            if ($mysqli->query($sql) === TRUE) {
                $mysqli->close();
                return true;
            } else {
                echo "Error: " . $mysqli->error;
                $mysqli->close();
                return false;
            }
        } else {
            return false;
        }
    }

    //delete a pet from the database

    // public function deletePet($id)
    // {
    //     $mysqli = $this->connect();
    //     if ($mysqli) {
    //         $sql = "DELETE FROM pets WHERE pet_id = $id";
    //         if ($mysqli->query($sql) === TRUE) {
    //             $mysqli->close();
    //             return true;
    //         } else {
    //             echo "Error: " . $mysqli->error;
    //             $mysqli->close();
    //             return false;
    //         }
    //     } else {
    //         return false;
    //     }
    // }
}



PET VIEW PAGE
   <?php
    if ($pets) {
        echo "<table border='1'>";
        echo "<tr>
        <th>ID</th>
        <th>name</th>
        <th>age</th>
        <th>color</th>
        <th>breed</th>
        <th>species</th>

    </tr>";
        foreach ($pets as $pet) {
            echo "<td>" . $pet['pet_id'] . "</td>";
            echo "<td>" . $pet['pet_name'] . "</td>";
            echo "<td>" . $pet['pet_age'] . "</td>";
            echo "<td>" . $pet['pet_color'] . "</td>";
            echo "<td>" . $pet['breed_id'] . "</td>";
            echo "<td>" . $pet['species_id'] . "</td>";
            echo "</tr>";
        }
        echo "</table>";
    } else {
        echo "No pet data found.";
    }

    if ($species) {

        echo "<table border='1'>";
        echo "<tr>
        <th>ID</th>
        <th>Species Type</th>
    </tr>";
        foreach ($species as $specie) {
            echo "<td>" . $specie['pet_species_id'] . "</td>";
            echo "<td>" . $specie['pet_species_type'] . "</td>";
            echo "</tr>";
        }
        echo "</table>";
    } else {
        echo "No species data found.";
    }


PET FORM PAGE

        <h2>Add a specie</h2>
        <form method="POST">
            <label for="name">pet specie:</label>
            <input type="text" id="type" name="type" required">


            <input type="submit" name="submit" value="Submit">
            <input type="reset" name="reset" value="Reset">
        </form>
        <h2>Add a toy</h2>
        <form method="POST">
            <label for="name">toy:</label>
            <input type="text" id="name" name="name" required">

            <input type="submit" name="submit" value="Submit">
            <input type="reset" name="reset" value="Reset">
        </form>
    </div>


    <div>
        <h2>Add a Pet</h2>
        <form method="POST">
            <label for="name">name:</label>
            <input type="text" id="name" name="name" required">


            <label for="age">age:</label>
            <input type="text" id="age" name="age" required">

            <label for="gender">gender:</label>
            <input type="text" id="gender" name="gender" required">


            <label for="color">color:</label>
            <input type="text" id="color" name="color" required">

            <label for="breed_id">breed:</label>

            <select name="breed_id" id="breed_id">
                <?php foreach ($breeds as $breed) : ?>
                    <option value="<?php echo $breed['pet_breed_id']; ?>"><?php echo $breed['pet_breed_name']; ?></option>
                <?php endforeach; ?>
            </select>

            <label for="species_id">species:</label>

            <select name="species_id" id="species_id">
                <?php foreach ($species as $specie) : ?>
                    <option value="<?php echo $specie['pet_species_id']; ?>"><?php echo $specie['pet_species_type']; ?></option>
                <?php endforeach; ?>
            </select>

            <input type="submit" name="submit" value="Submit">
            <input type="reset" name="reset" value="Reset">
        </form>
    </div>


        <!-- <form method="POST">
            <input type="hidden" name="action" value="updateBreed">
            <input type='hidden' name='pet_breed_id' value='<?php echo $breeds['pet_breed_id']; ?>'>
            <input type="text" name="new_breed_name" placeholder="Enter New Breed Name">
            <input type="submit" value="Update Breed">
        </form> -->